# Техническое задание для QA (30 мин)

## Установка

```bash
# Создайте виртуальное окружение
python3 -m venv .venv

# Активируйте его
source .venv/bin/activate  # Linux/macOS
# или
.venv\Scripts\activate     # Windows

# Установите зависимости
pip install -r requirements.txt
```

## Запуск тестов

```bash
# С активированным окружением
pytest -v

# Или напрямую через venv
.venv/bin/pytest -v
```

> Проект использует in-memory SQLite — база данных создается автоматически при запуске тестов, миграции не требуются.

---

## Структура проекта

```
qa_test_repo/
├── lessons/
│   ├── models.py      # Модель Lesson
│   ├── views.py       # LessonViewSet
│   └── serializers.py
├── tests/
│   ├── conftest.py    # Фикстуры (изучите!)
│   └── test_example.py # Пример теста (изучите!)
├── settings.py
└── urls.py
```

---

## API Эндпоинты

| Эндпоинт | Метод | Описание |
|----------|-------|----------|
| `/api/lessons/` | GET | Список всех уроков |
| `/api/lessons/` | POST | Создание урока |
| `/api/lessons/{id}/` | GET | Получение урока |
| `/api/lessons/{id}/` | PATCH | Обновление урока |
| `/api/lessons/{id}/` | DELETE | Удаление урока |

---

## Ваше задание

Создайте файл `tests/test_lessons.py` с тестами для `LessonViewSet`.

### Требования:

1. **Добавьте фикстуру** `lesson` в `conftest.py`:
   - Урок, связанный с пользователем из фикстуры `user`

2. **Напишите 4 тест-кейса** в классе `TestLessonViewSet`:
   - ✅ Аутентифицированный пользователь получает список уроков
   - ✅ Аутентифицированный пользователь получает урок по ID
   - ✅ Аутентифицированный пользователь может создать урок
   - ❌ Неаутентифицированный запрос возвращает 401

3. **Обязательно:**
   - Используйте `@pytest.mark.django_db`
   - Используйте существующие фикстуры из `conftest.py`
   - Проверяйте `response.status_code` и данные ответа

---

## Критерии оценки

| Критерий | Баллы |
|----------|-------|
| Корректное использование `@pytest.mark.django_db` | 15 |
| Фикстура `lesson` правильно использует зависимости | 25 |
| Корректные URL паттерны | 20 |
| Все 4 тест-кейса работают | 30 |
| Чистый, читаемый код | 10 |

---

## Подсказки

- Изучите `tests/conftest.py` — там уже есть фикстуры `user` и `auth_client`
- Изучите `tests/test_example.py` — там показан паттерн тестов
- Изучите `lessons/models.py` — там модель `Lesson`
- Запустите `pytest -v` чтобы проверить свои тесты
